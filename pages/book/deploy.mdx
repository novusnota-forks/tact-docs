# Deployment of Tact contracts

import { Callout } from 'nextra-theme-docs'

In Tact, it's a common practice to make contracts inherit the [`Deployable{:tact}`][deployable] trait and deploy them via a sending special [`Deploy{:tact}`][deploy] message alongside the [initial state](/book/expressions#initof).

Note, that contracts inheriting such trait return excessive funds upon deployment. That is, if you try to deploy a contract with any sufficient amount of Toncoins, the most of it (excluding fees) will be immediately returned to you after the deployment.

<Callout>

  As a result, those contracts would have an empty Toncoin balance after the deployment. It's a good practice to introduce an empty `"topup"{:tact}` [receiver](/book/contracts#receiver-functions) function that can be used to top up the contract's balance at any given moment:

  ```tact
  receive("topup") {}
  ```

</Callout>

## Deploying with `@ton/blueprint` [#blueprint]

<Callout>

  To be written as per [#290](https://github.com/tact-lang/tact-docs/issues/290).

</Callout>

## Deploying with `@tact-lang/deployer` [#deployer]

{/* To be enhanced in: https://github.com/tact-lang/tact-docs/issues/290 */}

Tact Deployer is a small library that integrates with [TON Verifier](https://verifier.ton.org) that allows you to deploy your contracts safely using your favorite wallet without needing to manage keys or deploy contracts manually. Tact Deployer also automatically verifies your contract's source code and you can be sure that your compiler is not compromised.

### Requirements [#deployer-requirements]

Your contract MUST have the `Deployer` trait from the `@stdlib/deploy` package to be able to use Tact Deployer.

### Installation [#deployer-installation]

To add Tact Deployer to your project, just use `yarn`:

```bash
yarn add @tact-lang/deployer
```

### Usage [#deployer-usage]

When you build your smart contracts using Tact, it produces a package (*.pkg) file that has all the required information about the built smart contract. To deploy your smart contract, you need to create a deployer instance, pass your package file to it and provide initial data for your contract.

```typescript
import * as fs from 'fs';
import * as path from 'path';
import { Address, contractAddress } from "ton";
import { SampleTactContract } from "./output/sample_SampleTactContract";
import { prepareTactDeployment } from "@tact-lang/deployer";

// Parameters
let testnet = true;                                 // Flag for testnet or mainnet
let packageName = 'sample_SampleTactContract.pkg';  // Name of your package to deploy
let outputPath = path.resolve(__dirname, 'output'); // Path to output directory
let owner = Address.parse('<put_address_here>');    // Our sample contract has an owner
let init = await SampleTactContract.init(owner);    // Create initial data for our contract

// Calculations
let address = contractAddress(0, init);     // Calculate contract address. MUST match with the address in the verifier
let data = init.data.toBoc();               // Create init data
let pkg = fs.readFileSync(                  // Read package file
    path.resolve(outputPath, packageName)
);

// Prepare deploy
let link = await prepareTactDeployment({ pkg, data, testnet });

// Present a deployment link and contract address
console.log('Address: ' + address.toString({ testOnly: testnet }));
console.log('Deploy link: ' + link);
```

After following this link you will be able to deploy and verify your smart contract.

[deployable]: /ref/stdlib-deploy#deployable
[deploy]: /ref/stdlib-deploy#deploy
